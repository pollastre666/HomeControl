"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[11],{11:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var r=t(9950),i=t(625),s=t(3816),o=t(3291),n=t(4243),l=t(5082),d=t(6220),c=t(6174),m=t(4414);const u=()=>{const e=(0,i.Zp)(),[a,t]=(0,r.useState)({contactType:"StoreLocator",name:"",email:"",postalCode:""}),[u,x]=(0,r.useState)({}),[p,h]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)([]),[j,v]=(0,r.useState)(null),[N,C]=(0,r.useState)(5),[w,S]=(0,r.useState)(null),k=(0,r.useRef)(null),P=[{id:1,name:"HomeControl Madrid Centro",address:"Calle Gran V\xeda, 28, 28013 Madrid",phone:"+34 910 123 456",hours:"Lun-Vie: 9:00-18:00, S\xe1b: 10:00-14:00",distance:"0.5 km"},{id:2,name:"HomeControl Barcelona Eixample",address:"Passeig de Gr\xe0cia, 43, 08007 Barcelona",phone:"+34 930 456 789",hours:"Lun-Vie: 10:00-19:00, S\xe1b: 10:00-15:00",distance:"1.2 km"},{id:3,name:"HomeControl Valencia Ciutat Vella",address:"Pla\xe7a de l'Ajuntament, 5, 46002 Valencia",phone:"+34 960 789 123",hours:"Lun-Vie: 9:30-18:30",distance:"0.8 km"}];(0,r.useEffect)((()=>{var e;null===(e=k.current)||void 0===e||e.focus()}),[]),(0,r.useEffect)((()=>{if(p&&!b){const a=setInterval((()=>{C((t=>t<=1?(clearInterval(a),e("/"),0):t-1))}),1e3);return()=>clearInterval(a)}}),[p,b,e]);const E=e=>{const{name:r,value:i}=e.target;t({...a,[r]:i}),"postalCode"===r&&(i&&!/^\d{5}$/.test(i)?x((e=>({...e,postalCode:"El c\xf3digo postal debe tener 5 d\xedgitos"}))):x((e=>({...e,postalCode:void 0}))))},V=e=>{v(j===e?null:e)};return(0,m.jsx)(s.P.div,{className:"max-w-4xl mx-auto p-4 sm:p-6 bg-white/90 backdrop-blur-md rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-b from-amber-50 to-white",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"easeOut"},role:"form","aria-label":"Formulario de b\xfasqueda de punto de venta",children:(0,m.jsx)(o.N,{children:p&&!b?(0,m.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},children:[(0,m.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 tracking-tight mb-4 text-center",children:"Tiendas Cercanas"}),(0,m.jsxs)("p",{className:"text-gray-600 text-base mb-6 text-center",children:["Encontramos ",y.length," tiendas cerca del c\xf3digo postal ",a.postalCode,"."]}),y.length>0?(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",role:"list","aria-label":"Lista de tiendas cercanas",children:y.map((e=>(0,m.jsxs)(s.P.div,{className:"p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer border border-amber-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*e.id},onClick:()=>V(e.id),role:"listitem","aria-label":`Tienda ${e.name}`,tabIndex:0,onKeyDown:a=>"Enter"===a.key&&V(e.id),children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:e.name}),(0,m.jsx)(s.P.div,{animate:{rotate:j===e.id?180:0},transition:{duration:.3},children:j===e.id?(0,m.jsx)(n.Ucs,{className:"text-amber-400"}):(0,m.jsx)(n.Vr3,{className:"text-amber-400"})})]}),(0,m.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:[e.distance," desde tu ubicaci\xf3n"]}),(0,m.jsx)(o.N,{children:j===e.id&&(0,m.jsxs)(s.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-2 space-y-2",children:[(0,m.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:[(0,m.jsx)(n.jHd,{className:"text-amber-400 mr-2","aria-hidden":"true"})," Direcci\xf3n: ",e.address]}),(0,m.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:[(0,m.jsx)(n.Cab,{className:"text-amber-400 mr-2","aria-hidden":"true"})," Tel\xe9fono: ",e.phone]}),(0,m.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:[(0,m.jsx)(n.w_X,{className:"text-amber-400 mr-2","aria-hidden":"true"})," Horario: ",e.hours]})]})})]},e.id)))}):(0,m.jsx)("p",{className:"text-gray-600 text-center",children:"No se encontraron tiendas."}),w&&(0,m.jsx)("p",{className:"text-red-500 text-sm text-center mt-4",children:w}),(0,m.jsx)("div",{className:"mt-6 flex justify-center",children:(0,m.jsx)(s.P.button,{onClick:()=>{var e;t({contactType:"StoreLocator",name:"",email:"",postalCode:""}),x({}),h(!1),f([]),v(null),C(5),S(null),null===(e=k.current)||void 0===e||e.focus()},className:"py-2 px-6 bg-amber-400 text-white font-semibold rounded-full hover:bg-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-400 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Buscar otra vez",children:"Buscar Otra Vez"})}),(0,m.jsxs)("p",{className:"text-center text-amber-600 font-semibold mt-4","aria-live":"polite",children:["Redirigiendo a la p\xe1gina principal en ",N," segundo",1!==N?"s":"","..."]})]},"results"):(0,m.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},children:[(0,m.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 tracking-tight mb-4 text-center",children:"Buscar Punto de Venta"}),(0,m.jsx)("p",{className:"text-gray-600 text-base mb-6 text-center",children:"Ingresa tu c\xf3digo postal para encontrar la tienda HomeControl m\xe1s cercana."}),w&&(0,m.jsx)("p",{className:"text-red-500 text-sm text-center mb-4",children:w}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return a.name||(e.name="El nombre es obligatorio"),a.email&&/\S+@\S+\.\S+/.test(a.email)||(e.email="Correo electr\xf3nico inv\xe1lido"),a.postalCode&&/^\d{5}$/.test(a.postalCode)||(e.postalCode="El c\xf3digo postal debe tener 5 d\xedgitos"),x(e),0===Object.keys(e).length})()){g(!0);try{console.log("StoreLocatorContactForm: Submitting form:",a),await(0,d.gS)((0,d.rJ)(l.db,"contacts"),{type:a.contactType,name:a.name,email:a.email,postalCode:a.postalCode,timestamp:new Date}),console.log("StoreLocatorContactForm: Form submitted to Firestore:",a),f(P),h(!0),S(null),c.oR.success("\xa1Solicitud de b\xfasqueda de tiendas enviada con \xe9xito!")}catch(t){console.error("StoreLocatorContactForm: Error submitting form:",t.code,t.message);const e="permission-denied"===t.code?"No tienes permiso para enviar el formulario. Verifica tu autenticaci\xf3n.":"Error al enviar el formulario. Int\xe9ntalo de nuevo.";S(e),c.oR.error(e)}finally{g(!1)}}},className:"max-w-md mx-auto space-y-6",noValidate:!0,children:[(0,m.jsx)("input",{type:"hidden",name:"contactType",value:"StoreLocator"}),(0,m.jsxs)(s.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},children:[(0,m.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Nombre",(0,m.jsx)("span",{className:"text-gray-500 text-xs ml-1",children:"(para contactarte)"})]}),(0,m.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:E,className:"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-400 focus:border-amber-400 bg-amber-50 transition-all duration-200","aria-required":"true","aria-describedby":"name-error",ref:k,placeholder:"Ej: Ana G\xf3mez"}),u.name&&(0,m.jsx)("p",{id:"name-error",className:"text-red-500 text-sm mt-1","aria-live":"assertive",children:u.name})]}),(0,m.jsxs)(s.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.1},children:[(0,m.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Correo Electr\xf3nico",(0,m.jsx)("span",{className:"text-gray-500 text-xs ml-1",children:"(para enviarte detalles)"})]}),(0,m.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:E,className:"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-400 focus:border-amber-400 bg-amber-50 transition-all duration-200","aria-required":"true","aria-describedby":"email-error",placeholder:"Ej: ana@example.com"}),u.email&&(0,m.jsx)("p",{id:"email-error",className:"text-red-500 text-sm mt-1","aria-live":"assertive",children:u.email})]}),(0,m.jsxs)(s.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.2},children:[(0,m.jsxs)("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700",children:["C\xf3digo Postal",(0,m.jsx)("span",{className:"text-gray-500 text-xs ml-1",children:"(5 d\xedgitos, ej: 28001)"})]}),(0,m.jsx)("input",{type:"text",id:"postalCode",name:"postalCode",value:a.postalCode,onChange:E,className:"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-400 focus:border-amber-400 bg-amber-50 transition-all duration-200","aria-required":"true","aria-describedby":"postalCode-error",placeholder:"Ej: 28001",maxLength:5}),u.postalCode&&(0,m.jsx)("p",{id:"postalCode-error",className:"text-red-500 text-sm mt-1","aria-live":"assertive",children:u.postalCode})]}),(0,m.jsx)(s.P.button,{type:"submit",className:"w-full py-3 px-4 bg-amber-400 text-white font-semibold rounded-full hover:bg-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-400 transition-colors duration-200 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},animate:{scale:[1,1.02,1]},transition:{duration:1.5,repeat:1/0},"aria-label":"Buscar tiendas",disabled:b,children:b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Buscando tiendas..."]}):"Buscar Tiendas"})]}),b&&(0,m.jsx)(s.P.div,{className:"mt-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},"aria-live":"polite",children:(0,m.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,m.jsx)(s.P.div,{className:"bg-amber-400 h-2.5 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]},"form")})})}}}]);