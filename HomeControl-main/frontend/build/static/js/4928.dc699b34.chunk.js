(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4928],{184:(e,a,t)=>{var s=t(2022),r=t(9248);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==s(e)}},1581:(e,a,t)=>{var s=t(4635),r=Object.prototype,i=r.hasOwnProperty,o=r.toString,l=s?s.toStringTag:void 0;e.exports=function(e){var a=i.call(e,l),t=e[l];try{e[l]=void 0;var s=!0}catch(n){}var r=o.call(e);return s&&(a?e[l]=t:delete e[l]),r}},2022:(e,a,t)=>{var s=t(4635),r=t(1581),i=t(5336),o=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):i(e)}},2588:(e,a,t)=>{var s=t(6914),r=t(4567),i=t(184),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,n=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=r(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var t=l.test(e);return t||n.test(e)?d(e.slice(2),t?2:8):o.test(e)?NaN:+e}},4378:(e,a,t)=>{var s=t(4759);e.exports=function(){return s.Date.now()}},4567:e=>{e.exports=function(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)}},4635:(e,a,t)=>{var s=t(4759).Symbol;e.exports=s},4759:(e,a,t)=>{var s=t(6658),r="object"==typeof self&&self&&self.Object===Object&&self,i=s||r||Function("return this")();e.exports=i},4928:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(9950),r=t(1123),i=t(3816),o=t(3291),l=t(6174),n=(t(9329),t(5054)),d=t(5082),c=t(6220),m=t(5491),u=t.n(m),x=t(4414);const p=()=>{const{user:e}=(0,n.A)(),[a,t]=(0,s.useState)([]),[m,p]=(0,s.useState)(1),[h,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[w,v]=(0,s.useState)(""),[N,C]=(0,s.useState)(""),[k,T]=(0,s.useState)("dueDate"),[P,D]=(0,s.useState)("asc"),[S,E]=(0,s.useState)(!1),[A,O]=(0,s.useState)(null),[R,$]=(0,s.useState)({name:"",description:"",priority:"Media",category:"Trabajo",dueDate:(new Date).toISOString().split("T")[0],status:"Pendiente",assignedTo:"",sharedWith:[]}),[H,M]=(0,s.useState)({}),[B,L]=(0,s.useState)([]),[U,W]=(0,s.useState)(!1),[F,z]=(0,s.useState)((()=>JSON.parse(localStorage.getItem(`notifiedTasks_${null===e||void 0===e?void 0:e.uid}`)||"{}"))),I=()=>({name:"",description:"",priority:"Media",category:"Trabajo",dueDate:(new Date).toISOString().split("T")[0],status:"Pendiente",assignedTo:"",sharedWith:[]}),J=(0,s.useCallback)((()=>{const e={};return R.name.trim()?/^[a-zA-Z0-9\s]{3,50}$/.test(R.name.trim())||(e.name="El nombre debe tener 3-50 caracteres alfanum\xe9ricos"):e.name="El nombre es obligatorio",R.description.length>500&&(e.description="La descripci\xf3n no puede exceder 500 caracteres"),R.dueDate?new Date(R.dueDate)<(new Date).setHours(0,0,0,0)&&(e.dueDate="La fecha no puede ser anterior a hoy"):e.dueDate="La fecha de vencimiento es obligatoria",R.assignedTo.trim()||(e.assignedTo="Asignar a alguien es obligatorio"),R.category||(e.category="La categor\xeda es obligatoria"),M(e),0===Object.keys(e).length}),[R]);(0,s.useEffect)((()=>{if(!e)return;W(!0);const a=(0,c.rJ)(d.db,`users/${e.uid}/tasks`),s=(0,c.aQ)(a,(e=>{const a=e.docs.map((e=>({id:e.id,...e.data(),sharedWith:e.data().sharedWith||[]})));t(a),W(!1)}),(e=>{console.error("Error listening to tasks:",e),l.oR.error("Error al cargar las tareas en tiempo real"),W(!1)}));return()=>s()}),[e]),(0,s.useEffect)((()=>{if(!e)return;const t=new Date;a.forEach((a=>{new Date(a.dueDate)<t&&"Completada"!==a.status&&!F[a.id]&&(l.oR.warn(`Tarea "${a.name}" est\xe1 vencida! Fecha l\xedmite: ${a.dueDate}`),z((t=>{const s={...t,[a.id]:!0};return localStorage.setItem(`notifiedTasks_${e.uid}`,JSON.stringify(s)),s})))}))}),[a,e,F]);const V=(e,a)=>{const t=new Date;return new Date(e)<t&&"Completada"!==a},q=(e,a)=>{const t=new Date,s=(new Date(e)-t)/864e5;return s<=2&&s>=0&&"Completada"!==a},Z=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?($({name:e.name,description:e.description,priority:e.priority,category:e.category,dueDate:e.dueDate,status:e.status,assignedTo:e.assignedTo,sharedWith:e.sharedWith}),O(e)):($(I()),O(null)),M({}),E(!0)}),[]),_=(0,s.useCallback)((()=>{E(!1),O(null),$(I()),M({})}),[]),G=async a=>{if(e){if(window.confirm("\xbfSeguro que quieres eliminar esta tarea?"))try{const t=(0,c.H9)(d.db,`users/${e.uid}/tasks`,a);await(0,c.kd)(t),z((t=>{const s={...t};return delete s[a],localStorage.setItem(`notifiedTasks_${e.uid}`,JSON.stringify(s)),s})),l.oR.success("Tarea eliminada con \xe9xito!")}catch(t){console.error("Error deleting task:",t),l.oR.error("Error al eliminar la tarea")}}else l.oR.error("Usuario no autenticado")},Q=async a=>{if(e)if(0!==B.length)try{const t=B.map((t=>(0,c.mZ)((0,c.H9)(d.db,`users/${e.uid}/tasks`,t),{status:a})));await Promise.all(t),L([]),l.oR.success("Estado de las tareas actualizado!")}catch(t){console.error("Error bulk updating tasks:",t),l.oR.error("Error al actualizar las tareas")}else l.oR.warn("Selecciona al menos una tarea para actualizar");else l.oR.error("Usuario no autenticado")},K=async t=>{if(!e)return void l.oR.error("Usuario no autenticado");const s="Completada"===a.find((e=>e.id===t)).status?"Pendiente":"Completada";try{const a=(0,c.H9)(d.db,`users/${e.uid}/tasks`,t);await(0,c.mZ)(a,{status:s}),l.oR.success("Estado de la tarea actualizado!")}catch(r){console.error("Error updating task status:",r),l.oR.error("Error al actualizar el estado")}},X=(0,s.useCallback)((e=>{L((a=>a.includes(e)?a.filter((a=>a!==e)):[...a,e]))}),[]),Y=(0,s.useCallback)((()=>{const e=["ID,Nombre,Descripci\xf3n,Prioridad,Categor\xeda,Fecha de Vencimiento,Estado,Asignado a,Compartido con",...a.map((e=>[e.id,`"${e.name.replace(/"/g,'""')}"`,`"${e.description.replace(/"/g,'""')}"`,e.priority,e.category,e.dueDate,e.status,e.assignedTo,e.sharedWith.join(";")].join(",")))].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.setAttribute("download","tareas.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),l.oR.success("Tareas exportadas a CSV!")}),[a]),ee=(0,s.useCallback)((()=>{const e=JSON.stringify(a,null,2),t=new Blob([e],{type:"application/json;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.setAttribute("download","tareas.json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),l.oR.success("Tareas exportadas a JSON!")}),[a]),ae=(0,s.useMemo)((()=>({total:a.length,completed:a.filter((e=>"Completada"===e.status)).length,overdue:a.filter((e=>V(e.dueDate,e.status))).length,byPriority:{Alta:a.filter((e=>"Alta"===e.priority)).length,Media:a.filter((e=>"Media"===e.priority)).length,Baja:a.filter((e=>"Baja"===e.priority)).length},byCategory:a.reduce(((e,a)=>(e[a.category]=(e[a.category]||0)+1,e)),{})})),[a]),te=(0,s.useCallback)(u()((e=>g(e)),300),[]),se=(0,s.useMemo)((()=>a.filter((e=>(e.name.toLowerCase().includes(h.toLowerCase())||e.assignedTo.toLowerCase().includes(h.toLowerCase()))&&(!b||e.priority===b)&&(!f||e.status===f)&&(!w||e.category===w)&&(!N||e.assignedTo.toLowerCase().includes(N.toLowerCase())))).sort(((e,a)=>{const t=e[k],s=a[k];return"dueDate"===k?"asc"===P?new Date(t)-new Date(s):new Date(s)-new Date(t):"asc"===P?String(t).localeCompare(String(s)):String(s).localeCompare(String(t))}))),[a,h,b,f,w,N,k,P]),re=Math.max(1,Math.ceil(se.length/7)),ie=7*m,oe=ie-7,le=se.slice(oe,ie),ne=(0,s.useCallback)((e=>{k===e?D("asc"===P?"desc":"asc"):(T(e),D("asc"))}),[k,P]),de=(0,s.useCallback)((e=>{e>=1&&e<=re&&p(e)}),[re]);return e?(0,x.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"p-4 sm:p-6 md:p-8 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl max-w-6xl mx-auto border border-amber-200/50 mt-8 mb-8",role:"region","aria-labelledby":"tareas-heading",children:[(0,x.jsxs)("div",{className:"mb-6 p-4 sm:p-6 bg-amber-50 rounded-lg shadow-inner",children:[(0,x.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-4",children:"Resumen de Tareas"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Total Tareas"}),(0,x.jsx)("p",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:ae.total})]}),(0,x.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Completadas"}),(0,x.jsx)("p",{className:"text-xl sm:text-2xl font-semibold text-green-600",children:ae.completed})]}),(0,x.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Vencidas"}),(0,x.jsx)("p",{className:"text-xl sm:text-2xl font-semibold text-red-600",children:ae.overdue})]}),(0,x.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Por Prioridad"}),(0,x.jsxs)("p",{className:"text-sm",children:["Alta: ",ae.byPriority.Alta," | Media: ",ae.byPriority.Media," | Baja: ",ae.byPriority.Baja]})]}),(0,x.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Por Categor\xeda"}),(0,x.jsx)("p",{className:"text-sm",children:Object.entries(ae.byCategory).map((e=>{let[a,t]=e;return`${a}: ${t}`})).join(" | ")})]})]})]}),(0,x.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,x.jsx)("h2",{id:"tareas-heading",className:"text-xl sm:text-2xl md:text-3xl font-extrabold text-gray-900 tracking-tight",children:"Control Dom\xe9stico - Tareas"}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,x.jsx)("input",{type:"text",placeholder:"Buscar tareas...",onChange:e=>te(e.target.value),className:"px-4 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 shadow-sm","aria-label":"Buscar tareas"}),(0,x.jsx)(i.P.button,{onClick:()=>Z(),className:"px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition duration-200 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"+ A\xf1adir Tarea"}),(0,x.jsx)(i.P.button,{onClick:Y,className:"px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition duration-200 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Exportar CSV"}),(0,x.jsx)(i.P.button,{onClick:ee,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Exportar JSON"})]})]}),(0,x.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filtrar por Prioridad"}),(0,x.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"mt-1 w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",children:[(0,x.jsx)("option",{value:"",children:"Todas"}),(0,x.jsx)("option",{value:"Alta",children:"Alta"}),(0,x.jsx)("option",{value:"Media",children:"Media"}),(0,x.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filtrar por Estado"}),(0,x.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"mt-1 w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",children:[(0,x.jsx)("option",{value:"",children:"Todos"}),(0,x.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,x.jsx)("option",{value:"En Progreso",children:"En Progreso"}),(0,x.jsx)("option",{value:"Completada",children:"Completada"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filtrar por Categor\xeda"}),(0,x.jsxs)("select",{value:w,onChange:e=>v(e.target.value),className:"mt-1 w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",children:[(0,x.jsx)("option",{value:"",children:"Todas"}),(0,x.jsx)("option",{value:"Trabajo",children:"Trabajo"}),(0,x.jsx)("option",{value:"Personal",children:"Personal"}),(0,x.jsx)("option",{value:"Urgente",children:"Urgente"}),(0,x.jsx)("option",{value:"Otros",children:"Otros"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filtrar por Asignado"}),(0,x.jsx)("input",{type:"text",value:N,onChange:e=>C(e.target.value),className:"mt-1 w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",placeholder:"Filtrar por asignado..."})]})]}),B.length>0&&(0,x.jsxs)("div",{className:"mb-6 flex flex-wrap gap-3",children:[(0,x.jsxs)(i.P.button,{onClick:async()=>{if(e)if(0!==B.length){if(window.confirm(`\xbfSeguro que quieres eliminar ${B.length} tareas?`))try{const a=B.map((a=>(0,c.kd)((0,c.H9)(d.db,`users/${e.uid}/tasks`,a))));await Promise.all(a),z((a=>{const t={...a};return B.forEach((e=>delete t[e])),localStorage.setItem(`notifiedTasks_${e.uid}`,JSON.stringify(t)),t})),L([]),l.oR.success("Tareas eliminadas con \xe9xito!")}catch(a){console.error("Error bulk deleting tasks:",a),l.oR.error("Error al eliminar las tareas")}}else l.oR.warn("Selecciona al menos una tarea para eliminar");else l.oR.error("Usuario no autenticado")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:["Eliminar Seleccionados (",B.length,")"]}),(0,x.jsx)(i.P.button,{onClick:()=>Q("Completada"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Marcar Completados"}),(0,x.jsx)(i.P.button,{onClick:()=>Q("Pendiente"),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Marcar Pendientes"})]}),U&&(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsxs)("svg",{className:"animate-spin h-8 w-8 text-amber-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,x.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,x.jsx)("p",{className:"mt-2 text-gray-600",children:"Cargando tareas..."})]}),!U&&(0,x.jsx)(x.Fragment,{children:0===a.length?(0,x.jsx)("div",{className:"text-center py-8 text-gray-600",children:"No hay tareas. Crea una nueva tarea para comenzar."}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-amber-200",children:[(0,x.jsx)("thead",{className:"bg-amber-50",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:(0,x.jsx)("input",{type:"checkbox",onChange:e=>L(e.target.checked?le.map((e=>e.id)):[]),checked:B.length===le.length&&le.length>0})}),(0,x.jsxs)("th",{onClick:()=>ne("id"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["ID ","id"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsxs)("th",{onClick:()=>ne("name"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["Tarea ","name"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Descripci\xf3n"}),(0,x.jsxs)("th",{onClick:()=>ne("priority"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["Prioridad ","priority"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsxs)("th",{onClick:()=>ne("category"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["Categor\xeda ","category"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsxs)("th",{onClick:()=>ne("dueDate"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["Fecha ","dueDate"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Estado"}),(0,x.jsxs)("th",{onClick:()=>ne("assignedTo"),className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer",children:["Asignado ","assignedTo"===k&&("asc"===P?"\u2191":"\u2193")]}),(0,x.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Acciones"})]})}),(0,x.jsx)("tbody",{className:"bg-white divide-y divide-amber-100",children:le.map(((e,a)=>(0,x.jsxs)(i.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*a},className:"hover:bg-amber-50 "+(V(e.dueDate,e.status)?"bg-red-100":q(e.dueDate,e.status)?"bg-yellow-100":""),children:[(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4",children:(0,x.jsx)("input",{type:"checkbox",checked:B.includes(e.id),onChange:()=>X(e.id)})}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-900",children:e.id}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm font-medium text-gray-900",children:e.name}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-700",children:e.description}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm",children:(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-white "+("Alta"===e.priority?"bg-red-500":"Media"===e.priority?"bg-yellow-500":"bg-green-500"),children:e.priority})}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-700",children:e.category}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-700",children:e.dueDate}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4",children:(0,x.jsx)(i.P.button,{onClick:()=>K(e.id),className:"px-3 py-1 rounded text-white "+("Completada"===e.status?"bg-green-500 hover:bg-green-600":"En Progreso"===e.status?"bg-yellow-500 hover:bg-yellow-600":"bg-red-500 hover:bg-red-600"),whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Cambiar estado de ${e.name} a ${"Completada"===e.status?"Pendiente":"Completada"}`,children:e.status})}),(0,x.jsx)("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-700",children:e.assignedTo}),(0,x.jsxs)("td",{className:"px-4 sm:px-6 py-4 flex gap-2",children:[(0,x.jsx)(i.P.button,{onClick:()=>Z(e),className:"px-3 py-1 bg-amber-500 text-white rounded-lg hover:bg-amber-600 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Editar ${e.name}`,children:"Editar"}),(0,x.jsx)(i.P.button,{onClick:()=>G(e.id),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Eliminar ${e.name}`,children:"Eliminar"})]})]},e.id)))})]})}),(0,x.jsx)("div",{className:"md:hidden space-y-4",children:le.map(((e,a)=>(0,x.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*a},className:"p-4 bg-white rounded-lg shadow-md border-l-4 "+(V(e.dueDate,e.status)?"border-red-500":q(e.dueDate,e.status)?"border-yellow-500":"border-green-500"),children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("input",{type:"checkbox",checked:B.includes(e.id),onChange:()=>X(e.id)}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name})]}),(0,x.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.description}),(0,x.jsxs)("p",{className:"text-sm mt-1",children:[(0,x.jsx)("span",{className:"font-medium",children:"Prioridad:"})," ",(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-white "+("Alta"===e.priority?"bg-red-500":"Media"===e.priority?"bg-yellow-500":"bg-green-500"),children:e.priority})]}),(0,x.jsxs)("p",{className:"text-sm mt-1",children:[(0,x.jsx)("span",{className:"font-medium",children:"Categor\xeda:"})," ",e.category]}),(0,x.jsxs)("p",{className:"text-sm mt-1",children:[(0,x.jsx)("span",{className:"font-medium",children:"Fecha:"})," ",e.dueDate]}),(0,x.jsxs)("p",{className:"text-sm mt-1",children:[(0,x.jsx)("span",{className:"font-medium",children:"Estado:"})," ",(0,x.jsx)(i.P.button,{onClick:()=>K(e.id),className:"px-3 py-1 rounded text-white "+("Completada"===e.status?"bg-green-500 hover:bg-green-600":"En Progreso"===e.status?"bg-yellow-500 hover:bg-yellow-600":"bg-red-500 hover:bg-red-600"),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.status})]}),(0,x.jsxs)("p",{className:"text-sm mt-1",children:[(0,x.jsx)("span",{className:"font-medium",children:"Asignado:"})," ",e.assignedTo]}),(0,x.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,x.jsx)(i.P.button,{onClick:()=>Z(e),className:"px-3 py-1 bg-amber-500 text-white rounded-lg hover:bg-amber-600 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Editar"}),(0,x.jsx)(i.P.button,{onClick:()=>G(e.id),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Eliminar"})]})]},e.id)))}),re>1&&(0,x.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,x.jsx)(i.P.button,{onClick:()=>de(m-1),disabled:1===m,className:"px-4 py-2 rounded-lg "+(1===m?"bg-gray-300 cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 text-white"),whileHover:{scale:1===m?1:1.05},whileTap:{scale:1===m?1:.95},children:"Anterior"}),(0,x.jsxs)("span",{className:"px-4 py-2 text-gray-700",children:["P\xe1gina ",m," de ",re]}),(0,x.jsx)(i.P.button,{onClick:()=>de(m+1),disabled:m===re,className:"px-4 py-2 rounded-lg "+(m===re?"bg-gray-300 cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 text-white"),whileHover:{scale:m===re?1:1.05},whileTap:{scale:m===re?1:.95},children:"Siguiente"})]})]})}),(0,x.jsx)(o.N,{children:S&&(0,x.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:_,role:"dialog","aria-labelledby":"modal-title","aria-modal":"true",children:(0,x.jsxs)(i.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3},className:"bg-white rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-4xl mx-4 sm:mx-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,x.jsx)("h2",{id:"modal-title",className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:A?"Editar Tarea":"A\xf1adir Nueva Tarea"}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4",children:[(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,x.jsx)("input",{type:"text",value:R.name,onChange:e=>$({...R,name:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",placeholder:"Nombre de la tarea","aria-invalid":!!H.name,"aria-describedby":H.name?"name-error":void 0}),H.name&&(0,x.jsx)("p",{id:"name-error",className:"text-red-600 text-xs mt-1",children:H.name})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,x.jsxs)("select",{value:R.priority,onChange:e=>$({...R,priority:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",children:[(0,x.jsx)("option",{value:"Alta",children:"Alta"}),(0,x.jsx)("option",{value:"Media",children:"Media"}),(0,x.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento"}),(0,x.jsx)("input",{type:"date",value:R.dueDate,onChange:e=>$({...R,dueDate:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm","aria-invalid":!!H.dueDate,"aria-describedby":H.dueDate?"dueDate-error":void 0}),H.dueDate&&(0,x.jsx)("p",{id:"dueDate-error",className:"text-red-600 text-xs mt-1",children:H.dueDate})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignado a"}),(0,x.jsx)("input",{type:"text",value:R.assignedTo,onChange:e=>$({...R,assignedTo:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",placeholder:"Nombre del asignado","aria-invalid":!!H.assignedTo,"aria-describedby":H.assignedTo?"assignedTo-error":void 0}),H.assignedTo&&(0,x.jsx)("p",{id:"assignedTo-error",className:"text-red-600 text-xs mt-1",children:H.assignedTo})]}),(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,x.jsx)("textarea",{value:R.description,onChange:e=>$({...R,description:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",rows:"4",placeholder:"Detalles de la tarea","aria-invalid":!!H.description,"aria-describedby":H.description?"description-error":void 0}),H.description&&(0,x.jsx)("p",{id:"description-error",className:"text-red-600 text-xs mt-1",children:H.description})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda"}),(0,x.jsxs)("select",{value:R.category,onChange:e=>$({...R,category:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm","aria-invalid":!!H.category,"aria-describedby":H.category?"category-error":void 0,children:[(0,x.jsx)("option",{value:"Trabajo",children:"Trabajo"}),(0,x.jsx)("option",{value:"Personal",children:"Personal"}),(0,x.jsx)("option",{value:"Urgente",children:"Urgente"}),(0,x.jsx)("option",{value:"Otros",children:"Otros"})]}),H.category&&(0,x.jsx)("p",{id:"category-error",className:"text-red-600 text-xs mt-1",children:H.category})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,x.jsxs)("select",{value:R.status,onChange:e=>$({...R,status:e.target.value}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",children:[(0,x.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,x.jsx)("option",{value:"En Progreso",children:"En Progreso"}),(0,x.jsx)("option",{value:"Completada",children:"Completada"})]})]}),(0,x.jsxs)("div",{className:"w-full sm:w-1/2",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compartido con"}),(0,x.jsx)("input",{type:"text",value:R.sharedWith.join(", "),onChange:e=>$({...R,sharedWith:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)}),className:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 shadow-sm",placeholder:"Correos separados por comas"})]})]}),(0,x.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,x.jsx)(i.P.button,{onClick:_,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition duration-200 shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),(0,x.jsx)(i.P.button,{onClick:async()=>{if(!J())return;if(!e)return void l.oR.error("Usuario no autenticado. Por favor, inicia sesi\xf3n.");W(!0);const a={name:R.name.trim(),description:R.description.trim(),priority:R.priority,category:R.category,dueDate:R.dueDate,status:R.status,assignedTo:R.assignedTo.trim(),sharedWith:R.sharedWith};try{const t=(0,c.rJ)(d.db,`users/${e.uid}/tasks`);if(A){const t=(0,c.H9)(d.db,`users/${e.uid}/tasks`,A.id);await(0,c.mZ)(t,a),l.oR.success("Tarea actualizada con \xe9xito!")}else await(0,c.gS)(t,a),l.oR.success("Tarea a\xf1adida con \xe9xito!")}catch(t){console.error("Error saving task:",t),l.oR.error(`Error al guardar la tarea: ${t.message}`)}finally{W(!1),_()}},disabled:U,className:"px-4 py-2 rounded-lg text-white shadow-sm "+(U?"bg-amber-300 cursor-not-allowed":"bg-amber-500 hover:bg-amber-600"),whileHover:{scale:U?1:1.05},whileTap:{scale:U?1:.95},children:U?"Guardando...":A?"Actualizar Tarea":"A\xf1adir Tarea"})]})]})})})]}):(0,x.jsx)(r.A,{children:(0,x.jsx)("div",{className:"text-center text-gray-600 py-8",children:"Por favor, inicia sesi\xf3n para gestionar tus tareas."})})};const h=function(){return(0,s.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,x.jsx)(r.A,{children:(0,x.jsx)(p,{})})}},5336:e=>{var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},5491:(e,a,t)=>{var s=t(4567),r=t(4378),i=t(2588),o=Math.max,l=Math.min;e.exports=function(e,a,t){var n,d,c,m,u,x,p=0,h=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(a){var t=n,s=d;return n=d=void 0,p=a,m=e.apply(s,t)}function f(e){var t=e-x;return void 0===x||t>=a||t<0||g&&e-p>=c}function j(){var e=r();if(f(e))return w(e);u=setTimeout(j,function(e){var t=a-(e-x);return g?l(t,c-(e-p)):t}(e))}function w(e){return u=void 0,b&&n?y(e):(n=d=void 0,m)}function v(){var e=r(),t=f(e);if(n=arguments,d=this,x=e,t){if(void 0===u)return function(e){return p=e,u=setTimeout(j,a),h?y(e):m}(x);if(g)return clearTimeout(u),u=setTimeout(j,a),y(x)}return void 0===u&&(u=setTimeout(j,a)),m}return a=i(a)||0,s(t)&&(h=!!t.leading,c=(g="maxWait"in t)?o(i(t.maxWait)||0,a):c,b="trailing"in t?!!t.trailing:b),v.cancel=function(){void 0!==u&&clearTimeout(u),p=0,n=x=d=u=void 0},v.flush=function(){return void 0===u?m:w(r())},v}},6658:(e,a,t)=>{var s="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;e.exports=s},6914:(e,a,t)=>{var s=t(8798),r=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(r,""):e}},8798:e=>{var a=/\s/;e.exports=function(e){for(var t=e.length;t--&&a.test(e.charAt(t)););return t}},9248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}}}]);