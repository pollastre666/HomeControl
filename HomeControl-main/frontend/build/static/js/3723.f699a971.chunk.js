"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3723],{3723:(e,a,r)=>{r.r(a),r.d(a,{default:()=>g});var t=r(9950),o=r(5054),i=r(5082),s=r(6220),d=r(625),l=r(3816),n=r(1123),c=r(4932),x=r(6174),y=r(4414);const g=()=>{const{user:e}=(0,o.A)(),[a,r]=(0,t.useState)([]),[g,m]=(0,t.useState)({title:"",body:""}),[u,h]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,s.GG)((0,s.rJ)(i.db,"content"));r(e.docs.map((e=>({id:e.id,...e.data()})))),h(!1)}catch(e){console.error("EditorDashboard: Content fetch error:",e),x.oR.error("Error al cargar contenido"),h(!1)}})()}),[]);return u||!e?(0,y.jsx)(n.A,{children:(0,y.jsx)(c.A,{})}):(0,y.jsx)(n.A,{children:(0,y.jsxs)(l.P.div,{className:"max-w-6xl mx-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,y.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-8",children:"Dashboard de Editor - IoT Solutions"}),(0,y.jsxs)(l.P.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},children:[(0,y.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,y.jsx)("svg",{className:"w-10 h-10 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("p",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200",children:["Bienvenido, ",e.name||e.username||"Editor","!"]}),(0,y.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Rol: ",e.role]})]})]}),(0,y.jsxs)("div",{className:"mt-8",children:[(0,y.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"A\xf1adir Contenido"}),(0,y.jsxs)(l.P.form,{onSubmit:async t=>{if(t.preventDefault(),g.title&&g.body)try{const t=await(0,s.gS)((0,s.rJ)(i.db,"content"),{...g,createdBy:e.uid,createdAt:new Date});r([...a,{id:t.id,...g,createdBy:e.uid}]),m({title:"",body:""}),x.oR.success("Contenido a\xf1adido")}catch(o){console.error("EditorDashboard: Content add error:",o),x.oR.error("Error al a\xf1adir contenido")}else x.oR.error("T\xedtulo y contenido son requeridos")},className:"space-y-6 bg-gray-100 dark:bg-gray-700 p-6 rounded-lg",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},"aria-label":"Formulario para a\xf1adir contenido",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"T\xedtulo"}),(0,y.jsx)("input",{type:"text",id:"title",value:g.title,onChange:e=>m({...g,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 transition-all duration-200",required:!0,"aria-required":"true"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Contenido"}),(0,y.jsx)("textarea",{id:"body",value:g.body,onChange:e=>m({...g,body:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 transition-all duration-200",rows:"5",required:!0,"aria-required":"true"})]}),(0,y.jsx)(l.P.button,{type:"submit",className:"px-6 py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"A\xf1adir contenido",children:"A\xf1adir"})]})]}),(0,y.jsxs)("div",{className:"mt-8",children:[(0,y.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"Contenido Existente"}),0===a.length?(0,y.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No hay contenido disponible."}):(0,y.jsx)("div",{className:"space-y-4",children:a.map((e=>(0,y.jsxs)(l.P.div,{className:"p-6 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,y.jsx)("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:e.title}),(0,y.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e.body}),(0,y.jsx)(l.P.button,{onClick:()=>(async e=>{try{await(0,s.kd)((0,s.H9)(i.db,"content",e)),r(a.filter((a=>a.id!==e))),x.oR.success("Contenido eliminado")}catch(t){console.error("EditorDashboard: Content delete error:",t),x.oR.error("Error al eliminar contenido")}})(e.id),className:"mt-3 text-red-500 hover:text-red-600 font-medium transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Eliminar contenido ${e.title}`,children:"Eliminar"})]},e.id)))})]}),(0,y.jsxs)("div",{className:"mt-8",children:[(0,y.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"Acciones"}),(0,y.jsxs)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,y.jsx)("li",{children:(0,y.jsx)(d.N_,{to:"/user/profile",className:"block p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200","aria-label":"Editar perfil",children:"Editar Perfil"})}),(0,y.jsx)("li",{children:(0,y.jsx)(d.N_,{to:"/editor/content",className:"block p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200","aria-label":"Gestionar contenido",children:"Gestionar Contenido"})})]})]})]})]})})}},4932:(e,a,r)=>{r.d(a,{A:()=>i});r(9950);var t=r(3816),o=r(4414);const i=()=>{const e={animate:{rotate:360,transition:{repeat:1/0,duration:1,ease:"linear"}}};return(0,o.jsx)("div",{className:"flex items-center justify-center h-screen bg-background dark:bg-gray-900","aria-label":"Cargando",children:(0,o.jsx)(t.P.div,{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full",variants:e,animate:"animate",role:"status","aria-live":"polite"})})}}}]);