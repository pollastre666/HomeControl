"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[511],{1511:(a,e,r)=>{r.r(e),r.d(e,{default:()=>m});var s=r(9950),t=r(5054),i=r(5082),l=r(6220),d=r(625),o=r(3816),n=r(688),c=r(4932),x=r(6174),g=r(4414);const m=()=>{const{user:a}=(0,t.A)(),[e,r]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[y,p]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{try{const a=await(0,l.GG)((0,l.rJ)(i.db,"users")),e=await(0,l.GG)((0,l.rJ)(i.db,"devices"));r(a.docs.map((a=>({id:a.id,...a.data()})))),h(e.docs.map((a=>({id:a.id,...a.data()})))),p(!1)}catch(a){console.error("AdminDashboard: Data fetch error:",a),x.oR.error("Error al cargar datos"),p(!1)}})()}),[]);return y||!a?(0,g.jsx)(n.A,{children:(0,g.jsx)(c.A,{})}):(0,g.jsx)(n.A,{children:(0,g.jsxs)(o.P.div,{className:"max-w-6xl mx-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,g.jsx)("h1",{className:"text-4xl font-bold text-yellow-400 mb-8",children:"Dashboard de Administrador - IoT Solutions"}),(0,g.jsxs)(o.P.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,g.jsx)("svg",{className:"w-10 h-10 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200",children:["Bienvenido, ",a.name||a.username||"Admin","!"]}),(0,g.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Rol: ",a.role]})]})]}),(0,g.jsxs)("div",{className:"mt-8",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"Usuarios"}),(0,g.jsx)("div",{className:"overflow-x-auto",children:(0,g.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[(0,g.jsx)("th",{className:"py-3 px-4 text-gray-800 dark:text-gray-200",children:"Email"}),(0,g.jsx)("th",{className:"py-3 px-4 text-gray-800 dark:text-gray-200",children:"Rol"}),(0,g.jsx)("th",{className:"py-3 px-4 text-gray-800 dark:text-gray-200",children:"Acciones"})]})}),(0,g.jsx)("tbody",{children:e.map((a=>(0,g.jsxs)(o.P.tr,{className:"border-b border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,g.jsx)("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:a.email}),(0,g.jsx)("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:a.role}),(0,g.jsx)("td",{className:"py-3 px-4",children:(0,g.jsx)(d.N_,{to:"/admin/roles",className:"text-yellow-400 hover:underline font-medium","aria-label":`Editar rol de ${a.email}`,children:"Editar"})})]},a.id)))})]})})]}),(0,g.jsxs)("div",{className:"mt-8",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"Dispositivos"}),0===m.length?(0,g.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No hay dispositivos registrados."}):(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((a=>(0,g.jsxs)(o.P.div,{className:"p-6 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m-9-11h2m18 0h-2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12a11 11 0 012.12-6.56M22 12a11 11 0 01-2.12 6.56M6.66 6.66A7.96 7.96 0 014.1 12a7.96 7.96 0 012.56 5.34m12.68 0A7.96 7.96 0 0119.9 12a7.96 7.96 0 01-2.56-5.34"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:a.name}),(0,g.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Estado: ",(0,g.jsx)("span",{className:a.status?"text-green-500":"text-red-500",children:a.status?"Encendido":"Apagado"})]}),(0,g.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Propietario: ",a.owner]})]})]}),(0,g.jsx)(o.P.button,{onClick:()=>(async(a,e)=>{try{await(0,l.mZ)((0,l.H9)(i.db,"devices",a),{status:!e}),h(m.map((r=>r.id===a?{...r,status:!e}:r))),x.oR.success("Estado del dispositivo actualizado")}catch(r){console.error("AdminDashboard: Device toggle error:",r),x.oR.error("Error al actualizar dispositivo")}})(a.id,a.status),className:"mt-4 px-4 py-2 rounded-lg font-medium transition-colors duration-200 "+(a.status?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Cambiar estado de ${a.name}`,children:a.status?"Apagar":"Encender"})]},a.id)))})]}),(0,g.jsxs)("div",{className:"mt-8",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400 mb-4",children:"Acciones"}),(0,g.jsxs)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,g.jsx)("li",{children:(0,g.jsx)(d.N_,{to:"/user/profile",className:"block p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200","aria-label":"Editar perfil",children:"Editar Perfil"})}),(0,g.jsx)("li",{children:(0,g.jsx)(d.N_,{to:"/admin/roles",className:"block p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200","aria-label":"Gestionar roles",children:"Gestionar Roles"})}),(0,g.jsx)("li",{children:(0,g.jsx)(d.N_,{to:"/admin/settings",className:"block p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200","aria-label":"Configuraciones",children:"Configuraciones"})})]})]})]})]})})}},4932:(a,e,r)=>{r.d(e,{A:()=>i});r(9950);var s=r(3816),t=r(4414);const i=()=>{const a={animate:{rotate:360,transition:{repeat:1/0,duration:1,ease:"linear"}}};return(0,t.jsx)("div",{className:"flex items-center justify-center h-screen bg-background dark:bg-gray-900","aria-label":"Cargando",children:(0,t.jsx)(s.P.div,{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full",variants:a,animate:"animate",role:"status","aria-live":"polite"})})}}}]);