"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[291],{291:(e,a,r)=>{r.r(a),r.d(a,{default:()=>m});var t=r(9950),i=r(625),s=r(3816),o=r(5082),n=r(6220),l=r(6174),d=r(4414);const m=()=>{const e=(0,i.Zp)(),[a,r]=(0,t.useState)({contactType:"Repair",name:"",email:"",phone:"",address:"",issue:""}),[m,c]=(0,t.useState)({}),[u,b]=(0,t.useState)(!1),[x,p]=(0,t.useState)(null),h=e=>{const{name:t,value:i}=e.target;r({...a,[t]:i})};return(0,d.jsx)(s.P.div,{className:"max-w-4xl mx-auto p-4 sm:p-6 bg-white/90 backdrop-blur-sm rounded-xl shadow-md hover:shadow-xl transition-all duration-300",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},role:"form","aria-label":"Formulario de solicitud de reparaci\xf3n",children:u?(0,d.jsx)(s.P.div,{className:"text-center text-amber-600 font-semibold",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:"\xa1Solicitud enviada! Redirigiendo..."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 tracking-tight mb-4",children:"Solicitar Reparaci\xf3n"}),(0,d.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mb-6",children:"Completa el formulario para agendar una reparaci\xf3n en casa."}),x&&(0,d.jsx)("p",{className:"text-red-500 text-sm text-center mb-4",children:x}),(0,d.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e={};return a.name||(e.name="El nombre es obligatorio"),a.email&&/\S+@\S+\.\S+/.test(a.email)||(e.email="Correo electr\xf3nico inv\xe1lido"),a.phone&&/^\+?\d{9,15}$/.test(a.phone)||(e.phone="Tel\xe9fono inv\xe1lido (9-15 d\xedgitos)"),a.address||(e.address="La direcci\xf3n es obligatoria"),a.issue||(e.issue="Describe el problema"),c(e),0===Object.keys(e).length})())try{console.log("RepairContactForm: Submitting form:",a),await(0,n.gS)((0,n.rJ)(o.db,"contacts"),{type:a.contactType,name:a.name,email:a.email,phone:a.phone,address:a.address,issue:a.issue,timestamp:new Date}),console.log("RepairContactForm: Form submitted to Firestore:",a),b(!0),p(null),l.oR.success("\xa1Solicitud de reparaci\xf3n enviada con \xe9xito!"),setTimeout((()=>e("/")),2e3)}catch(t){console.error("RepairContactForm: Error submitting form:",t.code,t.message);const e="permission-denied"===t.code?"No tienes permiso para enviar el formulario. Verifica tu autenticaci\xf3n.":"Error al enviar el formulario. Int\xe9ntalo de nuevo.";p(e),l.oR.error(e)}},className:"space-y-4",children:[(0,d.jsx)("input",{type:"hidden",name:"contactType",value:"Repair"}),(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,d.jsxs)(s.P.div,{className:"flex-1 space-y-4",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,d.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:h,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),m.name&&(0,d.jsx)("p",{className:"text-red-500 text-sm",children:m.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electr\xf3nico"}),(0,d.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:h,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),m.email&&(0,d.jsx)("p",{className:"text-red-500 text-sm",children:m.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Tel\xe9fono"}),(0,d.jsx)("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:h,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),m.phone&&(0,d.jsx)("p",{className:"text-red-500 text-sm",children:m.phone})]})]}),(0,d.jsxs)(s.P.div,{className:"flex-1 space-y-4",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Direcci\xf3n"}),(0,d.jsx)("input",{type:"text",id:"address",name:"address",value:a.address,onChange:h,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),m.address&&(0,d.jsx)("p",{className:"text-red-500 text-sm",children:m.address})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"issue",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n del Problema"}),(0,d.jsx)("textarea",{id:"issue",name:"issue",value:a.issue,onChange:h,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50",rows:"6","aria-required":"true"}),m.issue&&(0,d.jsx)("p",{className:"text-red-500 text-sm",children:m.issue})]})]})]}),(0,d.jsx)(s.P.button,{type:"submit",className:"w-full py-2 px-4 bg-amber-400 text-white font-semibold rounded-full hover:bg-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-400 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.4},"aria-label":"Enviar solicitud de reparaci\xf3n",children:"Enviar"})]})]})})}}}]);