"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[377],{4932:(e,r,a)=>{a.d(r,{A:()=>s});a(9950);var t=a(3816),i=a(4414);const s=()=>{const e={animate:{rotate:360,transition:{repeat:1/0,duration:1,ease:"linear"}}};return(0,i.jsx)("div",{className:"flex items-center justify-center h-screen bg-background dark:bg-gray-900","aria-label":"Cargando",children:(0,i.jsx)(t.P.div,{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full",variants:e,animate:"animate",role:"status","aria-live":"polite"})})}},6377:(e,r,a)=>{a.r(r),a.d(r,{default:()=>x});var t=a(9950),i=a(5054),s=a(5082),d=a(6220),n=a(625),o=a(688),l=a(4932),c=a(6174),m=a(4414);const x=()=>{const{user:e}=(0,i.A)(),[r,a]=(0,t.useState)([]),[x,u]=(0,t.useState)({title:"",body:""}),[h,y]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,d.GG)((0,d.rJ)(s.db,"content"));a(e.docs.map((e=>({id:e.id,...e.data()})))),y(!1)}catch(e){console.error("EditorContent: Content fetch error:",e),c.oR.error("Error al cargar contenido"),y(!1)}})()}),[]);return h||!e?(0,m.jsx)(o.A,{children:(0,m.jsx)(l.A,{})}):(0,m.jsx)(o.A,{children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-primary mb-6",children:"Gesti\xf3n de Contenido"}),(0,m.jsxs)("p",{className:"text-gray-700 dark:text-gray-200",children:["Bienvenido, ",e.name||e.username||"Editor","!"]}),(0,m.jsxs)("p",{className:"text-gray-700 dark:text-gray-200",children:["Rol: ",e.role]}),(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-primary",children:"A\xf1adir Contenido"}),(0,m.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),x.title&&x.body)try{const t=await(0,d.gS)((0,d.rJ)(s.db,"content"),{...x,createdBy:e.uid,createdAt:new Date});a([...r,{id:t.id,...x,createdBy:e.uid}]),u({title:"",body:""}),c.oR.success("Contenido a\xf1adido")}catch(i){console.error("EditorContent: Content add error:",i),c.oR.error("Error al a\xf1adir contenido")}else c.oR.error("T\xedtulo y contenido son requeridos")},className:"space-y-4","aria-label":"Formulario para a\xf1adir contenido",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"T\xedtulo"}),(0,m.jsx)("input",{type:"text",id:"title",value:x.title,onChange:e=>u({...x,title:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-gray-200",required:!0,"aria-required":"true"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Contenido"}),(0,m.jsx)("textarea",{id:"body",value:x.body,onChange:e=>u({...x,body:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-gray-200",rows:"5",required:!0,"aria-required":"true"})]}),(0,m.jsx)("button",{type:"submit",className:"btn-primary","aria-label":"A\xf1adir contenido",children:"A\xf1adir"})]})]}),(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-primary",children:"Contenido Existente"}),0===r.length?(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No hay contenido disponible."}):(0,m.jsx)("div",{className:"space-y-4 mt-4",children:r.map((e=>(0,m.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[(0,m.jsx)("h3",{className:"font-medium text-primary",children:e.title}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:e.body}),(0,m.jsx)("button",{onClick:()=>(async e=>{try{await(0,d.kd)((0,d.H9)(s.db,"content",e)),a(r.filter((r=>r.id!==e))),c.oR.success("Contenido eliminado")}catch(t){console.error("EditorContent: Content delete error:",t),c.oR.error("Error al eliminar contenido")}})(e.id),className:"mt-2 text-red-600 hover:underline","aria-label":`Eliminar contenido ${e.title}`,children:"Eliminar"})]},e.id)))})]}),(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-primary",children:"Acciones"}),(0,m.jsxs)("ul",{className:"mt-2 space-y-2",children:[(0,m.jsx)("li",{children:(0,m.jsx)(n.N_,{to:"/user/profile",className:"text-primary hover:underline","aria-label":"Editar perfil",children:"Editar Perfil"})}),(0,m.jsx)("li",{children:(0,m.jsx)(n.N_,{to:"/editor/dashboard",className:"text-primary hover:underline","aria-label":"Volver al dashboard",children:"Volver al Dashboard"})})]})]})]})})}}}]);