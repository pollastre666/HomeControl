"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[23],{1023:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var r=t(9950),s=t(5054),i=t(5082),o=t(6220),l=t(625),n=t(3816),d=t(688),c=t(4932),m=t(6174),u=t(4414);const x=()=>{const{user:e,checkDeviceAccess:a}=(0,s.A)(),{deviceId:t}=(0,l.g)(),x=(0,l.Zp)(),[g,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{if(!await a(e,t))return void x("/unauthorized");const r=await(0,o.x7)((0,o.H9)(i.db,"devices",t));r.exists()?h({id:r.id,...r.data()}):x("/user/dashboard"),b(!1)}catch(v){console.error("DeviceControl: Device fetch error:",v),y("Error al cargar dispositivo"),m.oR.error("Error al cargar dispositivo"),b(!1)}})()}),[t,e,x,a]);const j=async e=>{try{await(0,o.mZ)((0,o.H9)(i.db,"devices",t),e),h({...g,...e}),m.oR.success("Dispositivo actualizado")}catch(v){console.error("DeviceControl: Device update error:",v),y("Error al actualizar dispositivo"),m.oR.error("Error al actualizar dispositivo")}};return p||!g?(0,u.jsx)(d.A,{children:(0,u.jsx)(c.A,{})}):(0,u.jsx)(d.A,{children:(0,u.jsxs)(n.P.div,{className:"max-w-lg mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,u.jsxs)("h1",{className:"text-4xl font-bold text-yellow-400 mb-8 text-center",children:["Control de ",g.name," - IoT Solutions"]}),(0,u.jsxs)(n.P.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},children:[v&&(0,u.jsx)(n.P.div,{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg text-center",role:"alert","aria-live":"polite",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:v}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m-9-11h2m18 0h-2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12a11 11 0 012.12-6.56M22 12a11 11 0 01-2.12 6.56M6.66 6.66A7.96 7.96 0 014.1 12a7.96 7.96 0 012.56 5.34m12.68 0A7.96 7.96 0 0119.9 12a7.96 7.96 0 01-2.56-5.34"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Estado"}),(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Actualmente: ",(0,u.jsx)("span",{className:g.status?"text-green-500":"text-red-500",children:g.status?"Encendido":"Apagado"})]})]}),(0,u.jsx)(n.P.button,{onClick:()=>j({status:!g.status}),className:"px-4 py-2 rounded-lg font-medium transition-colors duration-200 "+(g.status?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Cambiar estado de ${g.name}`,children:g.status?"Apagar":"Encender"})]}),"thermostat"===g.type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"temperature",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Temperatura (\xb0C)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"number",id:"temperature",value:g.temperature||20,onChange:e=>j({temperature:Number(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 transition-all duration-200",min:"10",max:"30","aria-label":"Ajustar temperatura"}),(0,u.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5a4 4 0 014 4v3a4 4 0 01-8 0V9a4 4 0 014-4zm0 0V3m0 0h2m-2 0H7m2 9v6m0 0a2 2 0 002 2h2a2 2 0 002-2v-2"})})]}),(0,u.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Rango permitido: 10\xb0C - 30\xb0C"})]}),"camera"===g.type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Vista en Vivo"}),(0,u.jsx)(n.P.button,{className:"mt-2 px-4 py-2 bg-gray-400 text-gray-800 rounded-lg font-medium cursor-not-allowed",disabled:!0,"aria-label":"Vista en vivo no implementada",whileHover:{scale:1},children:"Vista en Vivo (No Implementado)"})]}),"lock"===g.type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Estado de la Cerradura"}),(0,u.jsx)(n.P.button,{onClick:()=>j({status:!g.status}),className:"mt-2 px-4 py-2 rounded-lg font-medium transition-colors duration-200 "+(g.status?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Cambiar estado de la cerradura ${g.name}`,children:g.status?"Desbloquear":"Bloquear"})]})]}),(0,u.jsx)(n.P.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:(0,u.jsx)("button",{onClick:()=>x("/user/dashboard"),className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200","aria-label":"Volver al dashboard",children:"Volver al Dashboard"})})]})]})})}},4932:(e,a,t)=>{t.d(a,{A:()=>i});t(9950);var r=t(3816),s=t(4414);const i=()=>{const e={animate:{rotate:360,transition:{repeat:1/0,duration:1,ease:"linear"}}};return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-background dark:bg-gray-900","aria-label":"Cargando",children:(0,s.jsx)(r.P.div,{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full",variants:e,animate:"animate",role:"status","aria-live":"polite"})})}}}]);