"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[927],{1927:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(9950),i=a(688),r=a(6174),l=(a(9329),a(4414));const n=()=>{const[e,s]=(0,t.useState)((()=>{const e=localStorage.getItem("schedules");try{return e?JSON.parse(e):[{id:1,name:"Horari 1",devices:["Llums sala","Persiana principal"],days:"Dilluns - Divendres",time:"08:00",active:!0},{id:2,name:"Horari 2",devices:["Term\xf2stat","Aire condicionat"],days:"Dissabte - Diumenge",time:"10:00",active:!0},{id:3,name:"Horari 3",devices:["Totes les llums"],days:"Cada dia",time:"19:30",active:!1},{id:4,name:"Horari 4",devices:["Alarma"],days:"Dilluns - Divendres",time:"23:00",active:!0}]}catch(s){return console.error("Error parsing localStorage schedules:",s),[{id:1,name:"Horari 1",devices:["Llums sala","Persiana principal"],days:"Dilluns - Divendres",time:"08:00",active:!0},{id:2,name:"Horari 2",devices:["Term\xf2stat","Aire condicionat"],days:"Dissabte - Diumenge",time:"10:00",active:!0},{id:3,name:"Horari 3",devices:["Totes les llums"],days:"Cada dia",time:"19:30",active:!1},{id:4,name:"Horari 4",devices:["Alarma"],days:"Dilluns - Divendres",time:"23:00",active:!0}]}})),[a,i]=(0,t.useState)(1),[n,d]=(0,t.useState)(null),[c,o]=(0,t.useState)("");(0,t.useEffect)((()=>{try{localStorage.setItem("schedules",JSON.stringify(e))}catch(s){console.error("Error al guardar camvios:",s)}}),[e]);const u=(e,a)=>{const t={...a,name:a.name.trim(),devices:a.devices.map((e=>e.trim())).filter((e=>""!==e)),days:a.days.trim(),time:a.time.trim()};t.name&&t.time&&0!==t.devices.length?(s((s=>s.map((s=>s.id===e?{...s,...t}:s)))),d(null),r.oR.success("Horari guardat amb \xe8xit!")):r.oR.error("Nom, hora i almenys un dispositiu s\xf3n obligatoris!")},m=e.filter((e=>e.name.toLowerCase().includes(c.toLowerCase())||e.days.toLowerCase().includes(c.toLowerCase()))),x=Math.max(1,Math.ceil(m.length/7)),p=7*a,h=p-7,g=m.slice(h,p),y=e=>{e>=1&&e<=x&&i(e)};return(0,l.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Control Dom\xf2estico - Horarios"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",placeholder:"Cercar horaris...",value:c,onChange:e=>o(e.target.value),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("button",{onClick:()=>{const a=e.length>0?Math.max(...e.map((e=>e.id)))+1:1,t={id:a,name:`Horario ${a}`,devices:["Nou dispositivo"],days:"Cada dia",time:"00:00",active:!0};s((e=>[...e,t])),r.oR.success("Horari afegit amb \xe8xit!")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200",children:"+ A\xf1adir Horario"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Horari"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aparells"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dies"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hora"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estat"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Accions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.id}),(0,l.jsx)("td",{className:"px-6 py-4",children:n===e.id?(0,l.jsx)("input",{type:"text",className:"border p-1 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:e.name,onBlur:s=>u(e.id,{...e,name:s.target.value})}):(0,l.jsx)("span",{className:"text-sm text-gray-900",children:e.name})}),(0,l.jsx)("td",{className:"px-6 py-4",children:n===e.id?(0,l.jsx)("input",{type:"text",className:"border p-1 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:e.devices.join(", "),onBlur:s=>u(e.id,{...e,devices:s.target.value.split(",").map((e=>e.trim()))})}):(0,l.jsx)("span",{className:"text-sm text-gray-700",children:e.devices.join(", ")})}),(0,l.jsx)("td",{className:"px-6 py-4",children:n===e.id?(0,l.jsxs)("select",{className:"border p-1 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:e.days,onChange:s=>u(e.id,{...e,days:s.target.value}),children:[(0,l.jsx)("option",{value:"Cada dia",children:"Cada dia"}),(0,l.jsx)("option",{value:"Dilluns - Divendres",children:"Dilluns - Divendres"}),(0,l.jsx)("option",{value:"Dissabte - Diumenge",children:"Dissabte - Diumenge"})]}):(0,l.jsx)("span",{className:"text-sm text-gray-700",children:e.days})}),(0,l.jsx)("td",{className:"px-6 py-4",children:n===e.id?(0,l.jsx)("input",{type:"time",className:"border p-1 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:e.time,onBlur:s=>u(e.id,{...e,time:s.target.value})}):(0,l.jsx)("span",{className:"text-sm text-gray-700",children:e.time})}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsx)("button",{onClick:()=>{return a=e.id,void s((e=>e.map((e=>e.id===a?{...e,active:!e.active}:e))));var a},className:`px-2 py-1 rounded text-white ${e.active?"bg-green-500":"bg-red-500"} hover:${e.active?"bg-green-600":"bg-red-600"}`,children:e.active?"Actiu":"Inactiu"})}),(0,l.jsxs)("td",{className:"px-6 py-4 flex gap-2",children:[n===e.id?(0,l.jsx)("button",{onClick:()=>d(null),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Guardar"}):(0,l.jsx)("button",{onClick:()=>d(e.id),className:"px-2 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Editar"}),(0,l.jsx)("button",{onClick:()=>{return a=e.id,void(window.confirm("Segur que vols eliminar aquest horari?")&&(s((e=>e.filter((e=>e.id!==a)))),d(null),r.oR.success("Horari eliminat amb \xe8xit!")));var a},className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Eliminar"})]})]},e.id)))})]})}),(0,l.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,l.jsx)("button",{onClick:()=>y(a-1),disabled:1===a,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Anterior"}),(0,l.jsxs)("span",{children:["P\xe0gina ",a," de ",x]}),(0,l.jsx)("button",{onClick:()=>y(a+1),disabled:a===x,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Seg\xfcent"})]})]})};const d=function(){return(0,t.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,l.jsxs)(i.A,{children:[(0,l.jsx)("p",{}),(0,l.jsx)(n,{})," "]})}}}]);