"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[295],{8295:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var r=t(9950),o=t(625),i=t(3816),n=t(5082),s=t(6220),l=t(6902),c=t(4414);const d=()=>{const e=(0,o.Zp)(),[a,t]=(0,r.useState)({contactType:"Budget",name:"",email:"",phone:"",product:""}),[d,m]=(0,r.useState)({}),[u,p]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null),[h,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=(0,l.hg)(n.j,(e=>{e?y(!0):(y(!1),console.warn("Usuario no autenticado"))}));return()=>e()}),[n.j]);const f=e=>{const{name:r,value:o}=e.target;t({...a,[r]:o})};return(0,c.jsx)(i.P.div,{className:"max-w-lg mx-auto p-4 sm:p-6 bg-white/90 backdrop-blur-sm rounded-xl pt-20 shadow-md hover:shadow-xl transition-all duration-300",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},role:"form","aria-label":"Formulario de solicitud de presupuesto",children:u?(0,c.jsx)(i.P.div,{className:"text-center text-amber-600 font-semibold",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:"\xa1Solicitud enviada! Redirigiendo..."}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 tracking-tight mb-4 text-center",children:"Solicitar Presupuesto"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mb-6 text-center",children:"Obt\xe9n un presupuesto personalizado para nuestros productos o servicios."}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h){if((()=>{const e={};return a.name||(e.name="El nombre es obligatorio"),a.email&&/\S+@\S+\.\S+/.test(a.email)||(e.email="Correo electr\xf3nico inv\xe1lido"),a.phone&&/^\+?\d{9,15}$/.test(a.phone)||(e.phone="Tel\xe9fono inv\xe1lido (9-15 d\xedgitos)"),a.product||(e.product="Describe el producto o servicio"),m(e),0===Object.keys(e).length})())try{await(0,s.gS)((0,s.rJ)(n.db,"contacts"),{type:a.contactType,name:a.name,email:a.email,phone:a.phone,product:a.product,timestamp:new Date}),console.log("Formulario enviado a Firestore:",a),p(!0),x(null),setTimeout((()=>e("/")),2e3)}catch(r){console.error("Error al enviar el formulario a Firestore:",{message:r.message,code:r.code,details:r.details});let e="Error al enviar el formulario. Int\xe9ntalo de nuevo.";"permission-denied"===r.code?e="No tienes permiso para enviar el formulario. Por favor, contacta al administrador.":"unavailable"===r.code&&(e="No se pudo conectar con el servidor. Verifica tu conexi\xf3n a internet."),x(e)}}else x("Espera a que se complete la autenticaci\xf3n antes de enviar.")},className:"space-y-6",children:[(0,c.jsx)("input",{type:"hidden",name:"contactType",value:"Budget"}),(0,c.jsxs)(i.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},children:[(0,c.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:f,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),d.name&&(0,c.jsx)("p",{className:"text-red-500 text-sm",children:d.name})]}),(0,c.jsxs)(i.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.1},children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electr\xf3nico"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:f,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),d.email&&(0,c.jsx)("p",{className:"text-red-500 text-sm",children:d.email})]}),(0,c.jsxs)(i.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.2},children:[(0,c.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Tel\xe9fono"}),(0,c.jsx)("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:f,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50","aria-required":"true"}),d.phone&&(0,c.jsx)("p",{className:"text-red-500 text-sm",children:d.phone})]}),(0,c.jsxs)(i.P.div,{initial:{y:20,opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},transition:{duration:.3,delay:.3},children:[(0,c.jsx)("label",{htmlFor:"product",className:"block text-sm font-medium text-gray-700",children:"Producto o Servicio"}),(0,c.jsx)("textarea",{id:"product",name:"product",value:a.product,onChange:f,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-amber-400 focus:border-amber-400 bg-amber-50 shadow-inner",rows:"8","aria-required":"true",placeholder:"Describe el producto o servicio que necesitas"}),d.product&&(0,c.jsx)("p",{className:"text-red-500 text-sm",children:d.product})]}),b&&(0,c.jsx)("p",{className:"text-red-500 text-sm text-center",children:b}),(0,c.jsx)(i.P.button,{type:"submit",className:"w-full py-2 px-4 bg-amber-400 text-white font-semibold rounded-full hover:bg-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-400 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.4},"aria-label":"Enviar solicitud de presupuesto",disabled:!h,children:"Enviar"})]})]})})}}}]);